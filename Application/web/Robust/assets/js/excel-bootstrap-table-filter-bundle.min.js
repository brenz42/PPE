!function(t){"use strict";t="default"in t?t.default:t;var e=function(){function t(t,e,i,n,r){this.options=r,this.th=e,this.column=i,this.index=n,this.tds=t.find("tbody tr td:nth-child("+(this.column+1)+")").toArray()}return t.prototype.initialize=function(){this.menu=this.dropdownFilterDropdown(),this.th.appendChild(this.menu);var t=$(this.menu.children[0]),e=$(this.menu.children[1]),i=$(this.menu);t.click(function(){return e.toggle()}),$(document).click(function(t){i.is(t.target)||0!==i.has(t.target).length||e.hide()})},t.prototype.searchToggle=function(t){if(this.selectAllCheckbox instanceof HTMLInputElement&&(this.selectAllCheckbox.checked=!1),0===t.length)return this.toggleAll(!0),void(this.selectAllCheckbox instanceof HTMLInputElement&&(this.selectAllCheckbox.checked=!0));this.toggleAll(!1),this.inputs.filter(function(e){return e.value.toLowerCase().indexOf(t.toLowerCase())>-1}).forEach(function(t){t.checked=!0})},t.prototype.updateSelectAll=function(){this.selectAllCheckbox instanceof HTMLInputElement&&($(this.searchFilter).val(""),this.selectAllCheckbox.checked=this.inputs.length===this.inputs.filter(function(t){return t.checked}).length)},t.prototype.selectAllUpdate=function(t){$(this.searchFilter).val(""),this.toggleAll(t)},t.prototype.toggleAll=function(t){for(var e=0;e<this.inputs.length;e++){var i=this.inputs[e];i instanceof HTMLInputElement&&(i.checked=t)}},t.prototype.dropdownFilterItem=function(t,e){var i=t.innerText,n=document.createElement("div");n.className="dropdown-filter-item";var r=document.createElement("input");return r.type="checkbox",r.value=i.trim().replace(/ +(?= )/g,""),r.setAttribute("checked","checked"),r.className="dropdown-filter-menu-item item",r.setAttribute("data-column",e.column.toString()),r.setAttribute("data-index",e.index.toString()),n.appendChild(r),n.innerHTML=n.innerHTML.trim()+" "+i,n},t.prototype.dropdownFilterItemSelectAll=function(){var t=this.options.captions.select_all,e=document.createElement("div");e.className="dropdown-filter-item";var i=document.createElement("input");return i.type="checkbox",i.value=this.options.captions.select_all,i.setAttribute("checked","checked"),i.className="dropdown-filter-menu-item select-all",i.setAttribute("data-column",this.column.toString()),i.setAttribute("data-index",this.index.toString()),e.appendChild(i),e.innerHTML=e.innerHTML+" "+t,e},t.prototype.dropdownFilterSearch=function(){var t=document.createElement("div");t.className="dropdown-filter-search";var e=document.createElement("input");return e.type="text",e.className="dropdown-filter-menu-search form-control",e.setAttribute("data-column",this.column.toString()),e.setAttribute("data-index",this.index.toString()),e.setAttribute("placeholder",this.options.captions.search),t.appendChild(e),t},t.prototype.dropdownFilterSort=function(t){var e=document.createElement("div");e.className="dropdown-filter-sort";var i=document.createElement("span");return i.className=t.toLowerCase().split(" ").join("-"),i.setAttribute("data-column",this.column.toString()),i.setAttribute("data-index",this.index.toString()),i.innerText=t,e.appendChild(i),e},t.prototype.dropdownFilterContent=function(){var t=this,e=this,i=document.createElement("div");i.className="dropdown-filter-content";var n=this.tds.reduce(function(t,e){return t.map(function(t){return t.innerText.trim()}).indexOf(e.innerText.trim())<0&&t.push(e),t},[]).sort(function(t,e){var i=t.innerText.toLowerCase(),n=e.innerText.toLowerCase();if(isNaN(Number(i))||isNaN(Number(n))){if(i<n)return-1;if(i>n)return 1}else{if(Number(i)<Number(n))return-1;if(Number(i)>Number(n))return 1}return 0}).map(function(i){return t.dropdownFilterItem(i,e)});this.inputs=n.map(function(t){return t.firstElementChild});var r=this.dropdownFilterItemSelectAll();this.selectAllCheckbox=r.firstElementChild,n.unshift(r);var o=this.dropdownFilterSearch();this.searchFilter=o.firstElementChild;var s=n.reduce(function(t,e){return t.appendChild(e),t},document.createElement("div"));s.className="checkbox-container";var l=[];return this.options.sort&&(l=l.concat([this.dropdownFilterSort(this.options.captions.a_to_z),this.dropdownFilterSort(this.options.captions.z_to_a)])),this.options.search&&l.push(o),l.concat(s).reduce(function(t,e){return t.appendChild(e),t},i)},t.prototype.dropdownFilterDropdown=function(){var t=document.createElement("div");t.className="dropdown-filter-dropdown";var e=document.createElement("span");e.className="dropdown-filter-icon";var i=document.createElement("i");return i.className="icon-filter2",e.appendChild(i),t.appendChild(e),t.appendChild(this.dropdownFilterContent()),$(this.th).hasClass("no-sort")&&$(t).find(".dropdown-filter-sort").remove(),$(this.th).hasClass("no-filter")&&$(t).find(".checkbox-container").remove(),$(this.th).hasClass("no-search")&&$(t).find(".dropdown-filter-search").remove(),$(this.th).hasClass("nothing")&&$(t).hide(),t},t}(),i=function(){function t(t,i){this.target=t,this.options=i,this.ths=t.find("th"+i.columnSelector).toArray(),this.filterMenus=this.ths.map(function(n,r){var o=$(n).index();return new e(t,n,o,r,i)}),this.rows=t.find("tbody").find("tr").toArray(),this.table=t.get(0)}return t.prototype.initialize=function(){this.filterMenus.forEach(function(t){t.initialize()}),this.bindCheckboxes(),this.bindSelectAllCheckboxes(),this.bindSort(),this.bindSearch()},t.prototype.bindCheckboxes=function(){var t=this.filterMenus,e=this.rows,i=this.ths,n=this.updateRowVisibility;this.target.find(".dropdown-filter-menu-item.item").change(function(){var r=$(this).data("index");$(this).val();t[r].updateSelectAll(),n(t,e,i)})},t.prototype.bindSelectAllCheckboxes=function(){var t=this.filterMenus,e=this.rows,i=this.ths,n=this.updateRowVisibility;this.target.find(".dropdown-filter-menu-item.select-all").change(function(){var r=$(this).data("index"),o=this.checked;t[r].selectAllUpdate(o),n(t,e,i)})},t.prototype.bindSort=function(){var t=this.filterMenus,e=this.rows,i=this.ths,n=this.sort,r=this.table,o=this.options,s=this.updateRowVisibility;this.target.find(".dropdown-filter-sort").click(function(){var l=$(this).find("span"),c=l.data("column"),a=l.attr("class");n(c,a,r,o),s(t,e,i)})},t.prototype.bindSearch=function(){var t=this.filterMenus,e=this.rows,i=this.ths,n=this.updateRowVisibility;this.target.find(".dropdown-filter-search").keyup(function(){var r=$(this).find("input"),o=r.data("index"),s=r.val();t[o].searchToggle(s),n(t,e,i)})},t.prototype.updateRowVisibility=function(t,e,i){for(var n=t.map(function(t){return{column:t.column,selected:t.inputs.filter(function(t){return t.checked}).map(function(t){return t.value.trim().replace(/ +(?= )/g,"")})}}),r=0;r<e.length;r++)for(var o=e[r].children,s=0;s<n.length;s++){var l=o[n[s].column].innerText.trim().replace(/ +(?= )/g,"");if(-1===n[s].selected.indexOf(l)){$(e[r]).hide();break}$(e[r]).show()}},t.prototype.sort=function(t,e,i,n){var r=1;e===n.captions.z_to_a.toLowerCase().split(" ").join("-")&&(r=-1);var o=$(i).find("tbody").get(0),s=$(o).find("tr").get();s.sort(function(e,i){var n=e.children[t].innerText.toUpperCase(),o=i.children[t].innerText.toUpperCase();if(isNaN(Number(n))||isNaN(Number(o))){if(n<o)return-1*r;if(n>o)return 1*r}else{if(Number(n)<Number(o))return-1*r;if(Number(n)>Number(o))return 1*r}return 0});for(var l=0;l<s.length;l++)o.appendChild(s[l])},t}();t.fn.excelTableFilter=function(e){return void 0===(e=t.extend({},t.fn.excelTableFilter.options,e)).columnSelector&&(e.columnSelector=""),void 0===e.sort&&(e.sort=!0),void 0===e.search&&(e.search=!0),void 0===e.captions&&(e.captions={a_to_z:"A à Z",z_to_a:"Z à A",search:"Rechercher",select_all:"Tout sélectionner"}),new i(this,e).initialize(),this},t.fn.excelTableFilter.options={}}(jQuery);